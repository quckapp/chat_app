# E2E Scenario 01: Two-User Text Chat
#
# Device A (Maestro): Login as User A -> open DM with User B -> send message
# Device B (WS/API): Phoenix WS client verifies message:new event
#
# Run via verify.sh which orchestrates both sides.
appId: com.quckapp.chat_app

env:
  PHONE: "9999900001"
  OTP_DIGIT_0: "1"
  OTP_DIGIT_1: "2"
  OTP_DIGIT_2: "3"
  OTP_DIGIT_3: "4"
  OTP_DIGIT_4: "5"
  OTP_DIGIT_5: "6"
  FIRST_NAME: "E2E"
  LAST_NAME: "UserA"
  USERNAME: "e2e_user_a"
  CHAT_PARTNER_NAME: "E2E UserB"
  MESSAGE_TEXT: "Hello from E2E test!"

- launchApp:
    clearState: true

# Login as User A
- runFlow: ../subflows/login.yaml

# Navigate to chat with User B
- runFlow: ../subflows/navigate_to_chat.yaml

# Send message
- runFlow: ../subflows/send_message.yaml

# Verify message appears in chat
- assertVisible: "Hello from E2E test!"

# Take screenshot for evidence
- takeScreenshot: "01_text_chat_sent"
