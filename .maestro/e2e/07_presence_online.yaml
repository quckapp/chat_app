# E2E Scenario 07: Presence (Online Status)
# Device A: Login (triggers online presence)
# Device B (WS): Receives presence_diff on presence channel
appId: com.quckapp.chat_app

env:
  PHONE: "9999900001"
  OTP_DIGIT_0: "1"
  OTP_DIGIT_1: "2"
  OTP_DIGIT_2: "3"
  OTP_DIGIT_3: "4"
  OTP_DIGIT_4: "5"
  OTP_DIGIT_5: "6"
  FIRST_NAME: "E2E"
  LAST_NAME: "UserA"
  USERNAME: "e2e_user_a"

- launchApp:
    clearState: true

# Login as User A â€” this triggers presence_state/presence_diff on WS
- runFlow: ../subflows/login.yaml

# Verify we're on home screen (presence is set by login)
- assertVisible: "Chats"

# Stay online for WS listener to catch presence
- extendedWaitUntil:
    timeout: 10000

- takeScreenshot: "07_presence_online"
